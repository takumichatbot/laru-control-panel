name: Laru Nexus Commander

# LaruNexusã‹ã‚‰ã® 'repository_dispatch' ã‚¤ãƒ™ãƒ³ãƒˆã‚’å¾…ã¡å—ã‘ã‚‹
on:
  repository_dispatch:
    types: [laru_command]

jobs:
  execute-command:
    runs-on: ubuntu-latest
    steps:
      - name: å¸ä»¤å—ä¿¡ (Receive Command)
        run: |
          echo "ğŸ“¡ LaruNexusã‹ã‚‰ã®ä¿¡å·ã‚’å—ä¿¡ã—ã¾ã—ãŸ"
          echo "Target Action: ${{ github.event.client_payload.action }}"
      
      # ã“ã“ã§å®Ÿéš›ã®å‡¦ç†ã‚’åˆ†å²ã•ã›ã¾ã™
      - name: ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè¡Œ (Execute Action)
        run: |
          ACTION="${{ github.event.client_payload.action }}"
          
          if [ "$ACTION" == "restart_service" ]; then
            echo "ğŸ”„ ã‚µãƒ¼ãƒãƒ¼å†èµ·å‹•ãƒ—ãƒ­ã‚»ã‚¹ã‚’é–‹å§‹ã—ã¾ã™..."
            # ã“ã“ã«Renderã®Deploy Hookãªã©ã‚’æ›¸ãã“ã¨ã§æœ¬å½“ã«å†èµ·å‹•ã§ãã¾ã™
            
          elif [ "$ACTION" == "sharding_db" ]; then
            echo "ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ°´å¹³åˆ†å‰²ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’èµ·å‹•..."
            # ã“ã“ã«DBæ“ä½œã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›¸ãã¾ã™
            
          else
            echo "â„¹ï¸ æœªå®šç¾©ã®ã‚³ãƒãƒ³ãƒ‰ã§ã™: $ACTION"
          fi

      - name: å®Œäº†å ±å‘Š (Report)
        run: echo "âœ… å…¨ãƒ—ãƒ­ã‚»ã‚¹å®Œäº†ã€‚LaruNexusã¸ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’è¿”å´ã—ã¾ã™ï¼ˆæƒ³å®šï¼‰"